<div class="container-fluid p-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
         <h1 class="m-0">Gestión de Ventas</h1>
         <button mat-flat-button color="primary" (click)="openNuevaVenta()">
            <mat-icon>shopping_cart</mat-icon> Nueva Venta
         </button>
      </div>

      <div class="mat-elevation-z8 table-responsive">
        <table mat-table [dataSource]="pedidoService.pedidos()">

           <!-- Factura -->
           <ng-container matColumnDef="factura">
              <th mat-header-cell *matHeaderCellDef> Factura </th>
              <td mat-cell *matCellDef="let p" class="fw-bold"> {{ p.numeroFactura }} </td>
           </ng-container>

           <!-- Fecha -->
           <ng-container matColumnDef="fecha">
              <th mat-header-cell *matHeaderCellDef> Fecha </th>
              <td mat-cell *matCellDef="let p"> {{ p.fecha | date:'dd/MM/yyyy' }} </td>
           </ng-container>

           <!-- Cliente -->
           <ng-container matColumnDef="cliente">
              <th mat-header-cell *matHeaderCellDef> Cliente </th>
              <td mat-cell *matCellDef="let p"> {{ getNombreCliente(p.clienteId) }} </td>
           </ng-container>

           <!-- Total -->
           <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let p" class="fw-bold text-success"> {{ p.total | currency }} </td>
           </ng-container>

           <!-- Estado -->
           <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let p"> 
                 <mat-chip-set>
                    <mat-chip [color]="p.estado === 'PAGADO' ? 'primary' : 'warn'" selected>
                        {{ p.estado }}
                    </mat-chip>
                 </mat-chip-set>
              </td>
           </ng-container>

           <!-- Acciones -->
           <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef> </th>
              <td mat-cell *matCellDef="let p" class="text-end">
                 <button mat-icon-button color="warn" (click)="anular(p.id)" [disabled]="p.estado === 'ANULADO'">
                    <mat-icon>block</mat-icon>
                 </button>
              </td>
           </ng-container>

           <tr mat-header-row *matHeaderRowDef="cols"></tr>
           <tr mat-row *matRowDef="let row; columns: cols;"></tr>

           <tr class="mat-row" *matNoDataRow>
             <td class="mat-cell" [colSpan]="cols.length" class="text-center p-4 text-muted">
                No hay ventas registradas aún.
             </td>
           </tr>
        </table>
      </div>
    </div>